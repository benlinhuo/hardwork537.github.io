---
layout:     post
title:      我理解的tsf
category: php
tags: [php]
description: TSF，全称Tencent Server Framework，底层基于swoole 扩展+ Coroutine实现的PHP协程框架
---

## 简介

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"作为世界上最好的开发语言"，php其高效的开发效率一直被人津津乐道，就像孪生兄弟一样总是如影随形，它的性能问题也一直被人诟病。平时开发过程中，一言不合就直接var_dump然后exit()，调试起来极其方便；还记得上份工作，web侧是用php开发、后台api用的是java，基本每次发布，都是等后台api发布，一个小时候，问他们怎么样了，“已经编译好了一半”，等api OK了，web侧一分钟就上线完成；也正因为如何，不需要每次都进行编译后执行，所以其性能问题也没有C、java等表现优异。

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;问题的出现也是进步最大的动力，于是乎php的优化、各种扩展的出现就是推动下的产物。最近表现比较优异的一个就是[swoole](http://www.swoole.com)：PHP的异步、并行、高性能网络通信引擎，使用纯C语言编写；其号称 简单易用开发效率高、并发百万TCP连接……

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;说了这么多，要说的重点终于要登场了，那就是[tsf](https://github.com/tencent-php/tsf)，全称“Tencent Server Framework”；网络层用的是上面提及的swoole，并结合php的协程，实现php的异步、高并发性能。

## DEMO 

* Swoole进程模型

![model](/images/tsf/model.jpg)

* TSF运行架构图

![framework](/images/tsf/framework.bmp)

* TSF协程

![coroutine](/images/tsf/coroutine.bmp)

* 支持start，stop，reload，restart，shutdown, status

![server](/images/tsf/server.png)

* 性能解密

![perform](/images/tsf/perform.png)

